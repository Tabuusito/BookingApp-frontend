<div class="container">
  <h2>Crear Cuenta</h2>
  <!-- Usaremos un Formulario Reactivo para manejar mejor los checkboxes -->
  <form [formGroup]="registerForm" (ngSubmit)="onRegister()">
    
    <!-- Username, Email, Password (cambiados para usar formControlName) -->
    <div class="form-group">
      <label for="username">Nombre de Usuario</label>
      <input type="text" id="username" class="form-control" formControlName="username">
      <!-- Aquí puedes añadir mensajes de error basados en el estado del formControl -->
    </div>

    <div class="form-group">
      <label for="email">Email</label>
      <input type="email" id="email" class="form-control" formControlName="email">
    </div>

    <div class="form-group">
      <label for="password">Contraseña</label>
      <input type="password" id="password" class="form-control" formControlName="password">
    </div>
    
    <!-- *** SECCIÓN NUEVA PARA ROLES *** -->
    <div class="form-group">
      <label>Quiero registrarme como:</label>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" id="roleClient" (change)="onRoleChange($event)">
        <label class="form-check-label" for="roleClient">
          Cliente (para reservar servicios)
        </label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" id="roleProvider" (change)="onRoleChange($event)">
        <label class="form-check-label" for="roleProvider">
          Proveedor (para ofrecer mis servicios)
        </label>
      </div>
      <!-- Mensaje de error si no se selecciona ningún rol -->
      <div *ngIf="registerForm.get('roles')?.hasError('required') && registerForm.get('roles')?.touched" class="error-message">
        Debes seleccionar al menos un rol.
      </div>
    </div>
    <!-- *** FIN DE LA SECCIÓN DE ROLES *** -->
    
    <div *ngIf="errorMessage" class="error-message">
      {{ errorMessage }}
    </div>

    <!-- El botón ahora se deshabilita basado en el estado del FormGroup -->
    <button type="submit" class="btn btn-primary" [disabled]="registerForm.invalid">Registrarse</button>
  </form>

  <div class="auth-links">
    <p>¿Ya tienes cuenta? <a routerLink="/login">Inicia Sesión</a></p>
  </div>
</div>