<div class="container home-container">
  <div class="home-header">
    <h1>Panel de Control</h1>
    <div>
      <button (click)="logout()" class="btn btn-link">Cerrar Sesión</button>
    </div>
  </div>

  <p class="welcome-message">Hola, {{ userName$ | async }}</p>

  <!-- SECCIÓN DEL PROVEEDOR (solo visible si es PROVIDER) -->
  <div *ngIf="isProvider$ | async" class="management-section">
    <h3>Panel de Proveedor</h3>
    <div class="management-links">
      <a routerLink="/my-services" class="btn btn-outline-primary">
        <i class="bi bi-tags-fill"></i> Gestionar mis Servicios
      </a>
      <a routerLink="/provider/timeslots/new" class="btn btn-outline-primary">
        <i class="bi bi-calendar-plus-fill"></i> Crear Horario Disponible
      </a>
    </div>
  </div>

  <!-- SECCIÓN DEL CLIENTE (solo visible si es CLIENT) -->
  <div *ngIf="isClient$ | async" class="client-section">
    <h3>Panel de Cliente</h3>
    <div class="client-actions">
        <button (click)="goToBookingCreation()" class="btn btn-secondary">Buscar y Reservar</button>
        <button (click)="goToCalendarView()" class="btn btn-secondary">Mi Calendario</button>
    </div>

    <!-- LISTA DE BOOKINGS (antes reservations) -->
    <div class="bookings-section">
      <h2>Próximas Reservas</h2>
      <div *ngIf="isLoading" class="loading-spinner">Cargando...</div>
      <div *ngIf="!isLoading && upcomingBookings.length > 0; else noUpcoming">
        <div *ngFor="let booking of upcomingBookings" class="booking-card" [ngClass]="'status-' + booking.status.toLowerCase()">
          <!-- ... estructura interna de la tarjeta (actualizar res por booking) ... -->
          <div class="card-header">
            <h3 class="service-name">{{ booking.serviceName }}</h3>
            <span class="status-badge">{{ booking.status }}</span>
          </div>
          <div class="card-footer">
            <button (click)="navigateToBookingDetails(booking.bookingUuid)" class="btn btn-link">Ver Detalles</button>
            <button (click)="cancelBooking(booking.bookingUuid)" class="btn btn-link-danger">Cancelar</button>
          </div>
        </div>
      </div>
      <ng-template #noUpcoming>
        <p class="placeholder-text" *ngIf="!isLoading">No tienes ninguna reserva próxima.</p>
      </ng-template>
    </div>
  </div>

</div>